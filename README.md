# EMGexe
肌电上位机Python+PYQT+matplotlib版本

# V1：实现串口基本功能
1. 实现串口的操作(打开、关闭、发送、接收)
2. Pyqt5相关空间的使用，实现界面的基本排布
3. QChart显示波形

--------------
# V2：使用QChart显示波形
1. 实现串口读取数据的编码/解码
2. 实现多线程的操作
3. 改变波形显示控件的使用，尚未得到有效的显示

---------------
# V3：更改为使用matplotlib显示波形
## V3.1
1. 实现串口读取数据的解码(多通道)   
   - 对32通道能够识别pn，两通道商不知pn对应字节
2. 优化多线程的操作
3. 使用matplotlib实现波形显示
4. 进行滤波器的设计

## V3.2
1. 进行硬件指令的插入和操作
    - 串口发送指令,串口接收数据
    - 对改变采样率、通道等尚未能完全操作
2. 进行滤波器的完善
   - 采用Chebyshev II型滤波器
   - 滤波效果仍需改善
3. 进行界面的优化
   - 优化界面的排布
   - 历史数据界面的显示仍需完善
4. 对历史数据界面波形显示进行控件的重新设计
   - 需要对界面操作进行优化

## V3.3
### V3.3-24
1. 完成串口指令的发送与接收判断
2. 滤波器功能仍需进一步完善
3. 完善全局变量的使用
4. 完善历史数据界面的显示、控件操作
5. 完善历史数据存储、实时数据读取、历史数据读取

### V3.3-28
1. 完成数据读取部分对数据的筛选,重新设计历史界面数据读取、数据处理的逻辑
2. 完成显示测量时间部分的功能
3. 优化数据解码部分的设计(未完成)


### V3.3-30
1. 优化数据处理逻辑，基本实现8000Hz实时的显示
2. 完善整体代码的注释和美化
3. 完成历史数据读取界面图形显示的操作
4. 完成历史数据读取时对数据的操作
5. 优化实时显示界面坐标轴的显示与同步(未完成: 坐标轴与图形尺寸匹配仍存在问题+无法同步放缩坐标轴  \[测量数据存储方式读取出现问题\] )
   

**TODO**
- [x] 8000Hz实时显示仍然有问题，持续时间较长后会出现卡顿(> 2min仍会出现卡顿)，对多线程进行运行时间输出对比，认为是 (解码+numpy数据追加) 过程随时间的积累导致数据量过大，导致卡顿
- [x] 实时检测界面坐标轴显示问题，确无法同步显示，可优化显示过程或添加辅助坐标轴，辅助坐标轴不进行刷新(注意界面的尺寸以及放缩不要遮盖到文字)
- [x] 滤波器显示效果不佳，现阶段仍需进一步优化，包括处理效率、处理效果以及处理窗口选择

-----------------------

# V4：更改为使用pyqtgraph显示波形

## V4.1
1. 修改图形显示控件为pyqtgraph
2. 优化数据存储模式(Queue)

## V4.2
1. 增加对数据标记点的识别与显示
2. 优化图形显示空间的排布

## V4.3
> 4.13 组会实现功能
1. 优化ui界面的显示与排布，增加子界面的显示
2. 优化ui界面自动化尺寸在不同分辨率下的显示

## 23.06.25

-  优化控件结构, 已实现 `utils` 部分控件
-  升级到 `PyQt6`
-  优化项目结构
-  设置测试文件夹, 进行框架测试

## 23.06.28

- 控件优化进展: `SerialDialog` `CanvasFrame` `MainWin`

## 23.06.29

- 优化并实现串口数据读取-数据处理-数据显示的流程
- 本次优化可以实现32通道的数据显示

## 23.06.30

- 实现 数据显示-数据存储 的流程
- 优化 数据显示 界面的范围控制
- 实现 FFT 的显示
- 重写 关闭按钮 的逻辑，保证关闭时的串口关闭-数据存储

## 23.07.03

- 实时采集部分优化完成
- FFT算法重写
- FFT显示优化
- 线程处理优化